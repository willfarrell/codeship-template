- name: Build Application
  type: serial
  services:
    - node
  steps:
    - command: gitflow
    - command: aws-env-check
    - command: docker-env-check
    - command: npm-env-check
    - command: terraform-env-check
    - name: Install Dependencies
    - name: Build Application

- name: CI Application
  type: parallel
  services:
    - node
  steps:
    - name: Code - Linting
    - name: Unit & Integration Tests
    - name: Dependencies - Outdated
    - name: Dependencies - Security
    - name: Code - SAST

- name: Save Application Build
  type: serial
  services:
    - aws
  steps:
    - name: Bundle Application
    - name: Store Bundled Application

- name: Deploy Application
  type: serial
  services:
    - aws
  steps:
    - name: Exit if not a deployment branch
      command: bash -c 'if ["${ENVIRONMENT}" == "default"]; then exit 0; fi'

    - name: Deploy Application
    - name: Clear Cache
    - name: Notifications
