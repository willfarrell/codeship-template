- name: Setup
  type: serial
  service: base
  steps:
    - command: setup-env

- name: Setup
  type: serial
  service: docker
  steps:
    - command: docker-env-check
    - command: docker-auth

- name: Build CI/CD Docker Images
  type: parallel
  service: docker
  steps:
    - name: name
      command: docker-build org/name ./

- name: Push Docker Images
  type: parallel
  service: docker
  steps:
    - tag: ^(master|develop|release/\*|v[0-9]+\.[0-9]+\.[0-9]+)
      command: docker-push willfarrell/autoheal
